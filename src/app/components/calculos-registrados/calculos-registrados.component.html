<div class="calculos-container">
  <!-- Header following Gov.br Design System -->
  <header class="br-header compact">
    <div class="container-lg">
      <div class="header-top">
        <div class="header-logo">
          <img src="/assets/bndeslogo.png" alt="BNDES" class="logo" />
        </div>
        
        <div class="header-actions">
          <div class="header-functions">
            <button 
              class="br-button secondary small" 
              type="button" 
              aria-label="Alto Contraste"
              [class.active]="isHighContrast"
              (click)="toggleHighContrast()">
              <i class="fas fa-adjust" aria-hidden="true"></i>
              <span class="button-text">Alto Contraste</span>
            </button>
            <button 
              class="br-button secondary small" 
              type="button" 
              aria-label="VLibras"
              [class.active]="isVLibrasActive"
              (click)="toggleVLibras()">
              <i class="fas fa-universal-access" aria-hidden="true"></i>
              <span class="button-text">VLibras</span>
            </button>
            <button class="br-button secondary small" type="button" aria-label="Sair" (click)="logout()">
              <i class="fas fa-sign-out-alt" aria-hidden="true"></i>
              <span class="button-text">Sair</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="main-content">
    <div class="container-lg">
      <!-- Loading Overlay -->
      <div *ngIf="isLoadingData" class="loading-overlay">
        <br-loading 
          size="medium" 
          [message]="loadingMessage">
        </br-loading>
      </div>
      
      <!-- Page Header com Menu Hambúrguer -->
      <div class="page-header">
        <div class="page-title-section">
          <div class="title-with-menu">
            <!-- Hamburger Menu posicionado ao lado do título -->
            <app-hamburger-menu 
              [menuItems]="menuItems"
              [isOpen]="isMenuOpen"
              (menuToggle)="onMenuToggle($event)"
              (itemClick)="onMenuItemClick($event)">
            </app-hamburger-menu>
            <div class="title-content">
              <h1 class="page-title">Cálculos registrados</h1>
              <p class="page-subtitle">Inventários realizados em fazendas registradas sob o CPF <strong>168.225.840-80</strong> de <strong>José Lemos</strong></p>
            </div>
          </div>
        </div>
      </div>

      <!-- Search and Actions Section -->
      <div class="search-actions-section">
        <div class="search-input">
          <div class="br-input">
            <input 
              type="text" 
              placeholder="Buscar por fazenda, CAR ou tipo..."
              class="form-control"
              [(ngModel)]="searchTerm"
              (input)="onSearch()"
              aria-label="Pesquisar itens">
            <button 
              class="search-button" 
              type="button" 
              (click)="onSearch()" 
              aria-label="Pesquisar">
              <i class="fas fa-search" aria-hidden="true"></i>
            </button>
          </div>
        </div>
        <div class="search-actions">
          <button class="br-button primary" type="button" (click)="openCreateModal()">
            <i class="fas fa-plus" aria-hidden="true"></i>
            Criar inventário
          </button>
        </div>
      </div>

      <!-- Results Section -->
      <div class="results-section" [class.loading]="isLoadingData">
        <div class="table-responsive">
          <table class="br-table">
            <thead>
              <tr>
                <th>CAR</th>
                <th>Fazenda</th>
                <th>Tipo</th>
                <th>Estado</th>
                <th>Tamanho (ha)</th>
                <th>Ano</th>
                <th>Versão</th>
                <th>Status</th>
                <th>Em. Total</th>
                <th>Certificação</th>
                <th>Ação</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of paginatedItems">
                <td>{{ getCarDisplayNumber(item.car) }}</td>
                <td>{{ item.fazenda }}</td>
                <td>{{ item.tipo }}</td>
                <td>{{ item.estado }}</td>
                <td>{{ item.tamanho | number:'1.6-6' }}</td>
                <td>{{ item.ano }}</td>
                <td>{{ item.versao }}</td>
                <td>
                  <span class="status-badge" [ngClass]="getStatusClass(item.status)">
                    <i class="fas fa-check" *ngIf="item.status === 'Concluído'" aria-hidden="true"></i>
                    <i class="fas fa-file" *ngIf="item.status === 'Rascunho'" aria-hidden="true"></i>
                    <i class="fas fa-edit" *ngIf="item.status === 'Ajustar'" aria-hidden="true"></i>
                    {{ item.status }}
                  </span>
                </td>
                <td>{{ item.emissaoTotal | number:'1.3-3' }}</td>
                <td>
                  <span class="cert-badge" [ngClass]="getCertificacaoClass(item.certificacao)">
                    <i class="fas fa-check" *ngIf="item.certificacao === 'Certificado'" aria-hidden="true"></i>
                    <i class="fas fa-times" *ngIf="item.certificacao === 'Não certificado'" aria-hidden="true"></i>
                    <i class="fas fa-clock" *ngIf="item.certificacao === 'Em certificação'" aria-hidden="true"></i>
                    <i class="fas fa-hourglass-half" *ngIf="item.certificacao === 'Não iniciado'" aria-hidden="true"></i>
                    {{ item.certificacao }}
                  </span>
                </td>
                <td>
                  <div class="action-buttons">
                    <button class="br-button circle small primary me-2" type="button" (click)="openViewModal(item)" title="Visualizar">
                      <i class="fas fa-eye" aria-hidden="true"></i>
                    </button>
                    <button 
                      class="br-button circle small secondary me-2" 
                      type="button" 
                      (click)="openEditModal(item)" 
                      [disabled]="item.status === 'Concluído'"
                      [title]="item.status === 'Concluído' ? 'Não é possível editar. Cálculos concluídos não podem ser editados.' : 'Editar'">
                      <i class="fas fa-edit" aria-hidden="true"></i>
                    </button>
                    <button 
                      class="br-button circle small danger" 
                      type="button" 
                      (click)="openDeleteModal(item)" 
                      [disabled]="item.status !== 'Rascunho'"
                      [title]="item.status !== 'Rascunho' ? 'Não é possível excluir. Apenas cálculos com status Rascunho podem ser excluídos.' : 'Excluir'">
                      <i class="fas fa-trash" aria-hidden="true"></i>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Pagination -->
        <div class="pagination-section">
          <div class="pagination-info">
            <span>Exibir</span>
            <select [(ngModel)]="itemsPerPage" class="items-per-page">
              <option value="10">10</option>
              <option value="25">25</option>
              <option value="50">50</option>
            </select>
            <span>1-{{ itemsPerPage }} de {{ totalItems }} itens</span>
          </div>
          <div class="pagination-controls">
            <span>Página</span>
            <select [(ngModel)]="currentPage" class="page-select">
              <option *ngFor="let page of [].constructor(totalPages); let i = index" [value]="i + 1">
                {{ i + 1 }}
              </option>
            </select>
            <div class="pagination-buttons">
              <button class="br-button secondary small" 
                      type="button" 
                      (click)="changePage(currentPage - 1)"
                      [disabled]="currentPage === 1">
                <i class="fas fa-chevron-left" aria-hidden="true"></i>
              </button>
              <button class="br-button secondary small" 
                      type="button" 
                      (click)="changePage(currentPage + 1)"
                      [disabled]="currentPage === totalPages">
                <i class="fas fa-chevron-right" aria-hidden="true"></i>
              </button>
            </div>
          </div>
        </div>

        <!-- Data filling notice -->
        <div class="data-notice">
          <span>Preenchimento de dados por terceiros?</span>
          <a href="#" class="criar-procuracao-link" (click)="openProcuracaoModal(); $event.preventDefault()">
            Criar procuração
          </a>
        </div>
      </div>
    </div>
  </main>

  <!-- Create Inventory Modal -->
  <div class="modal-overlay" *ngIf="showCreateModal || showEditModal" (click)="$event.stopPropagation()">
    <div class="modal-content modal-right modal-large" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title">{{ isEditMode ? 'Editar inventário' : 'Criar inventário' }}</h2>
        <button class="modal-close" type="button" (click)="isEditMode ? confirmCloseEditModal() : confirmCloseCreateModal()">
          <i class="fas fa-times" aria-hidden="true"></i>
        </button>
      </div>
      
      <div class="modal-body">
        <p class="modal-description">
          {{ isEditMode ? 'Edite os dados do inventário da fazenda.' : 'Prezado, indique os dados solicitados abaixo para criar o inventário da fazenda.' }}
        </p>
        
        <form class="inventory-form" (ngSubmit)="isEditMode ? confirmSubmitEdit() : confirmSubmitCreate()">
          <!-- CAR Input -->
          <div class="form-group">
            <label for="car" class="br-label bold-label">CAR</label>
            <div class="br-input">
              <input
                type="text"
                id="car"
                name="car"
                [(ngModel)]="novoInventario.car"
                (input)="formatCAR($event)"
                placeholder="UF-1234567-E6D3.395B.6D27.4F42.AE22.DD56.987C.DD52"
                class="form-control"
                maxlength="50"
                required
              />
            </div>
            <span class="field-legend">Ex: UF-1234567-E6D3.395B.6D27.4F42.AE22.DD56.987C.DD52</span>
            
            <!-- Status do CAR -->
            <div class="car-status-container" *ngIf="isConsultandoCAR || carStatus || carNaoEncontrado">
              <!-- Loading -->
              <div *ngIf="isConsultandoCAR" class="car-status loading">
                <span class="spinner-border spinner-border-sm me-2"></span>
                <span>Consultando CAR...</span>
              </div>
              
              <!-- Status encontrado -->
              <div *ngIf="carStatus && !isConsultandoCAR" class="car-status" [ngClass]="getCarStatusClass()">
                <div class="status-header">
                  <i [class]="getCarStatusIcon()" aria-hidden="true"></i>
                  <strong>{{ carStatus.status }}</strong>
                </div>
                <p class="status-description">{{ carStatus.descricao }}</p>
                <small class="status-details" *ngIf="carStatus.detalhes">{{ carStatus.detalhes }}</small>
              </div>
              
              <!-- CAR não encontrado -->
              <div *ngIf="carNaoEncontrado && !isConsultandoCAR" class="car-status text-warning-dark">
                <div class="status-header">
                  <i class="fas fa-exclamation-triangle" aria-hidden="true"></i>
                  <strong>CAR não encontrado</strong>
                </div>
                <p class="status-description">O número do CAR informado não foi encontrado na base de dados.</p>
              </div>
            </div>
          </div>

          <!-- Year Input -->
          <div class="form-group">
            <label for="ano" class="br-label bold-label">Ano</label>
            <div class="br-select">
              <select id="ano" name="ano" [(ngModel)]="novoInventario.ano" class="form-control" required>
              <option *ngFor="let ano of anos" [value]="ano">{{ ano }}</option>
            </select>
            </div>
            <div class="form-help">
              <span>Selecione o ano base do cálculo</span>
            </div>
          </div>

          <!-- Farm registered info -->
          <div class="farm-info">
            <p><strong>Fazenda registrada sob o CPF 168.225.840-80 de José Lemos</strong></p>
          </div>

          <!-- Farm Name -->
          <div class="form-group">
            <label for="fazenda" class="br-label bold-label">Nome da fazenda</label>
            <div class="br-input">
              <input
                type="text"
                id="fazenda"
                name="fazenda"
                [(ngModel)]="novoInventario.fazenda"
                placeholder="Lemos Cultural"
                class="form-control"
                maxlength="100"
                required
                (input)="onNomeFazendaChange($event)"
                [disabled]="isEditMode"
              />
            </div>
            <span class="field-legend">Ex: Fazenda São José (máximo 100 caracteres)</span>
          </div>

          <!-- Type -->
          <div class="form-group">
            <label for="tipo" class="br-label bold-label">Tipo</label>
            <div class="br-select">
              <select id="tipo" name="tipo" [(ngModel)]="novoInventario.tipo" class="form-control" required>
                <option value="Leite">Leite</option>
                <option value="Corte">Corte</option>
              </select>
            </div>
            <div class="form-help">
              <i class="fas fa-info-circle" aria-hidden="true"></i>
              <span>Informe o tipo de produção predominante do CAR informado</span>
            </div>
          </div>

          <!-- State and Municipality -->
          <div class="form-row">
            <div class="form-group">
              <label for="estado" class="br-label bold-label">Estado</label>
              <div class="br-select">
                <select id="estado" name="estado" [(ngModel)]="novoInventario.estado" class="form-control" required>
                  <option *ngFor="let estado of estados" [value]="estado.sigla">{{ estado.sigla }}</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label for="municipio" class="br-label bold-label">Município</label>
              <div class="br-input">
                <input
                  type="text"
                  id="municipio"
                  name="municipio"
                  [(ngModel)]="novoInventario.municipio"
                  placeholder="Santana do Riacho"
                  class="form-control"
                  required
                />
              </div>
              <span class="field-legend">Ex: São Paulo</span>
            </div>
          </div>

          <!-- Total Area -->
          <div class="form-group">
            <label for="tamanho" class="br-label bold-label">Área total (ha)</label>
            <div class="br-input">
              <input
                type="number"
                id="tamanho"
                name="tamanho"
                [(ngModel)]="novoInventario.tamanho"
                placeholder="1"
                class="form-control"
                required
                step="0.000001"
                min="0"
                (input)="preventNegativeInput($event)"
              />
            </div>
            <span class="field-legend">Ex: 150.5</span>
          </div>
        </form>
      </div>

      <div class="br-modal-footer confirmation-modal-footer d-flex justify-content-end">
        <button class="br-button secondary me-2" type="button" (click)="isEditMode ? confirmCloseEditModal() : confirmCloseCreateModal()">
          Cancelar
        </button>
        <button class="br-button primary" type="button" [disabled]="!isFormValid()" (click)="isEditMode ? confirmSubmitEdit() : confirmSubmitCreate()">
          Confirmar
        </button>
      </div>
    </div>
  </div>

  <!-- View Inventory Modal -->
  <div class="modal-overlay" *ngIf="showViewModal" (click)="$event.stopPropagation()">
    <div class="modal-content modal-right modal-large" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title">Visualizar inventário</h2>
        <button class="modal-close" type="button" (click)="closeViewModal()">
          <i class="fas fa-times" aria-hidden="true"></i>
        </button>
      </div>
      
      <div class="modal-body">
        <p class="modal-description">
          Visualização dos dados do inventário da fazenda.
        </p>
        
        <div class="inventory-form view-mode">
          <!-- CAR Input -->
          <div class="form-group">
            <label for="view-car" class="br-label bold-label">CAR</label>
            <div class="br-input">
              <input
                type="text"
                id="view-car"
                name="car"
                [value]="selectedItem?.car"
                class="form-control"
                readonly
              />
            </div>
            <span class="field-legend">Ex: UF-1234567-E6D3.395B.6D27.4F42.AE22.DD56.987C.DD52</span>
          </div>

          <!-- Year Input -->
          <div class="form-group">
            <label for="view-ano" class="br-label bold-label">Ano</label>
            <div class="br-input">
              <input
                type="text"
                id="view-ano"
                name="ano"
                [value]="selectedItem?.ano"
                class="form-control"
                readonly
              />
            </div>
            <div class="form-help">
              <span>Ano base do cálculo</span>
            </div>
          </div>

          <!-- Farm registered info -->
          <div class="farm-info">
            <p><strong>Fazenda registrada sob o CPF 168.225.840-80 de José Lemos</strong></p>
          </div>

          <!-- Farm Name -->
          <div class="form-group">
            <label for="view-fazenda" class="br-label bold-label">Nome da fazenda</label>
            <div class="br-input">
              <input
                type="text"
                id="view-fazenda"
                name="fazenda"
                [value]="selectedItem?.fazenda"
                class="form-control"
                readonly
              />
            </div>
            <span class="field-legend">Ex: Fazenda São José</span>
          </div>

          <!-- Type -->
          <div class="form-group">
            <label for="view-tipo" class="br-label bold-label">Tipo</label>
            <div class="br-input">
              <input
                type="text"
                id="view-tipo"
                name="tipo"
                [value]="selectedItem?.tipo"
                class="form-control"
                readonly
              />
            </div>
            <div class="form-help">
              <i class="fas fa-info-circle" aria-hidden="true"></i>
              <span>Tipo de produção predominante do CAR informado</span>
            </div>
          </div>

          <!-- State and Municipality -->
          <div class="form-row">
            <div class="form-group">
              <label for="view-estado" class="br-label bold-label">Estado</label>
              <div class="br-input">
                <input
                  type="text"
                  id="view-estado"
                  name="estado"
                  [value]="selectedItem?.estado"
                  class="form-control"
                  readonly
                />
              </div>
            </div>
            <div class="form-group">
              <label for="view-municipio" class="br-label bold-label">Município</label>
              <div class="br-input">
                <input
                  type="text"
                  id="view-municipio"
                  name="municipio"
                  [value]="selectedItem?.municipio"
                  class="form-control"
                  readonly
                />
              </div>
              <span class="field-legend">Ex: São Paulo</span>
            </div>
          </div>

          <!-- Total Area -->
          <div class="form-group">
            <label for="view-tamanho" class="br-label bold-label">Área total (ha)</label>
            <div class="br-input">
              <input
                type="text"
                id="view-tamanho"
                name="tamanho"
                [value]="selectedItem?.tamanho"
                class="form-control"
                readonly
              />
            </div>
            <span class="field-legend">Ex: 150.5</span>
          </div>
        </div>
      </div>

      <div class="br-modal-footer d-flex justify-content-end">
        <button class="br-button primary" type="button" (click)="closeViewModal()">
          Fechar
        </button>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal with Gov.br Design System -->
  <div 
    class="br-scrim foco" 
    *ngIf="showDeleteModal" 
    data-scrim="true" 
    aria-modal="true" 
    role="dialog"
    data-visible="true"
    id="deleteModalScrim">
    <div class="br-modal small" (click)="$event.stopPropagation()">
      <div class="br-modal-header">
        <div class="modal-title">Confirmar exclusão</div>
        <button class="br-button circle small" type="button" aria-label="Fechar modal" data-dismiss="true"
          (click)="closeDeleteModal()">
          <i class="fas fa-times" aria-hidden="true"></i>
        </button>
      </div>

      <div class="br-modal-body">
        <div class="delete-confirmation">
          <div class="delete-icon">
            <i class="fas fa-exclamation-triangle text-warning-dark" aria-hidden="true"></i>
          </div>
          <p class="delete-message">
            Tem certeza de que deseja excluir o inventário <strong>{{ selectedItem?.fazenda }}</strong>?
            Esta ação não pode ser desfeita.
          </p>
        </div>
      </div>

      <div class="br-modal-footer delete-modal-footer d-flex align-items-center justify-content-end">
        <button class="br-button secondary me-2" type="button" data-dismiss="true" (click)="closeDeleteModal()">
          Cancelar
        </button>
        <button class="br-button danger" type="button" (click)="confirmDelete()">
          <i class="fas fa-trash mr-1" aria-hidden="true"></i>
          Excluir
        </button>
      </div>
    </div>
  </div>

  <!-- Cancel Confirmation Modal -->
  <div class="br-scrim foco" *ngIf="showCancelConfirmModal" data-scrim="true" aria-modal="true" role="dialog"
    data-visible="true" id="cancelConfirmModalScrim">
    <div class="br-modal small" (click)="$event.stopPropagation()">
      <div class="br-modal-header">
        <div class="modal-title">Confirmar cancelamento</div>
        <button class="br-button circle small" type="button" aria-label="Fechar modal" data-dismiss="true"
          (click)="closeCancelConfirmModal()">
          <i class="fas fa-times" aria-hidden="true"></i>
        </button>
      </div>
      <div class="br-modal-body">
        <div class="delete-confirmation">
          <div class="delete-icon">
            <i class="fas fa-exclamation-triangle text-warning-dark" aria-hidden="true"></i>
          </div>
          <p class="delete-message">
            Tem certeza de que deseja cancelar? Todas as alterações não salvas serão perdidas.
          </p>
        </div>
      </div>
      <div class="br-modal-footer cancel-confirmation-modal-footer d-flex align-items-center justify-content-end">
        <button class="br-button secondary me-2" type="button" data-dismiss="true" (click)="closeCancelConfirmModal()">
          Cancelar
        </button>
        <button class="br-button danger" type="button" (click)="confirmCancel()">
          <i class="fas fa-times mr-1" aria-hidden="true"></i>
          Cancelar
        </button>
      </div>
    </div>
  </div>

  <!-- Save Confirmation Modal -->
  <div class="br-scrim foco" *ngIf="showSaveConfirmModal" data-scrim="true" aria-modal="true" role="dialog"
    data-visible="true" id="saveConfirmModalScrim">
    <div class="br-modal small" (click)="$event.stopPropagation()">
      <div class="br-modal-header">
        <div class="modal-title">Confirmar {{ isEditMode ? 'alterações' : 'cadastro' }}</div>
        <button class="br-button circle small" type="button" aria-label="Fechar modal" data-dismiss="true"
          (click)="closeSaveConfirmModal()">
          <i class="fas fa-times" aria-hidden="true"></i>
        </button>
      </div>
      <div class="br-modal-body">
        <div class="delete-confirmation">
          <div class="delete-icon">
            <i class="fas fa-check-circle text-success" aria-hidden="true"></i>
          </div>
          <p class="delete-message">
            Tem certeza de que deseja {{ isEditMode ? 'salvar as alterações' : 'cadastrar este inventário' }}?
          </p>
        </div>
      </div>
      <div class="br-modal-footer save-confirmation-modal-footer d-flex align-items-center justify-content-end">
        <button class="br-button secondary me-2" type="button" data-dismiss="true" (click)="closeSaveConfirmModal()">
          Cancelar
        </button>
        <button class="br-button primary" type="button" (click)="confirmSave()">
          <i class="fas fa-check mr-1" aria-hidden="true"></i>
          {{ isEditMode ? 'Confirmar' : 'Confirmar' }}
        </button>
      </div>
    </div>
  </div>

  <!-- Duplicate Name Modal -->
  <div class="br-scrim foco" *ngIf="showDuplicateNameModal" data-scrim="true" aria-modal="true" role="dialog"
    data-visible="true" id="duplicateNameModalScrim">
    <div class="br-modal small" (click)="$event.stopPropagation()">
      <div class="br-modal-header">
        <div class="modal-title">Nome já existe</div>
        <button class="br-button circle small" type="button" aria-label="Fechar modal" data-dismiss="true"
          (click)="closeDuplicateNameModal()">
          <i class="fas fa-times" aria-hidden="true"></i>
        </button>
      </div>
      <div class="br-modal-body">
        <div class="delete-confirmation">
          <div class="delete-icon">
            <i class="fas fa-exclamation-triangle text-warning-dark" aria-hidden="true"></i>
          </div>
          <p class="delete-message">
            {{ duplicateNameMessage }}
          </p>
        </div>
      </div>
      <div class="br-modal-footer d-flex align-items-center justify-content-center">
        <button type="button" class="br-button primary" (click)="closeDuplicateNameModal()">
          <i class="fas fa-check mr-1" aria-hidden="true"></i>
          Entendi
        </button>
      </div>
    </div>
  </div>

  <!-- CAR Duplicate Modal -->
  <div class="br-scrim foco" *ngIf="showCarDuplicateModal" data-scrim="true" aria-modal="true" role="dialog"
    data-visible="true" id="carDuplicateModalScrim">
    <div class="br-modal small" (click)="$event.stopPropagation()">
      <div class="br-modal-header">
        <div class="modal-title">CAR já está em uso</div>
        <button class="br-button circle small" type="button" aria-label="Fechar modal" data-dismiss="true"
          (click)="closeCarDuplicateModal()">
          <i class="fas fa-times" aria-hidden="true"></i>
        </button>
      </div>
      <div class="br-modal-body">
        <div class="delete-confirmation">
          <div class="delete-icon">
            <i class="fas fa-exclamation-triangle text-warning-dark" aria-hidden="true"></i>
          </div>
          <p class="delete-message">
            {{ carDuplicateMessage }}
          </p>
          <p class="delete-warning text-warning-dark">
            Por favor, verifique o número do CAR ou utilize um CAR diferente.
          </p>
        </div>
      </div>
      <div class="br-modal-footer d-flex align-items-center justify-content-center">
        <button type="button" class="br-button primary" (click)="closeCarDuplicateModal()">
          <i class="fas fa-check mr-1" aria-hidden="true"></i>
          Entendi
        </button>
      </div>
    </div>
  </div>

  <!-- Required Fields Modal -->
  <div class="br-scrim foco" *ngIf="showRequiredFieldsModal" data-scrim="true" aria-modal="true" role="dialog"
    data-visible="true" id="requiredFieldsModalScrim">
    <div class="br-modal small" (click)="$event.stopPropagation()">
      <div class="br-modal-header">
        <div class="modal-title">Campos obrigatórios</div>
        <button class="br-button circle small" type="button" aria-label="Fechar modal" data-dismiss="true"
          (click)="closeRequiredFieldsModal()">
          <i class="fas fa-times" aria-hidden="true"></i>
        </button>
      </div>
      <div class="br-modal-body">
        <div class="delete-confirmation">
          <div class="delete-icon">
            <i class="fas fa-exclamation-triangle text-warning-dark" aria-hidden="true"></i>
          </div>
          <p class="delete-message">
            Os seguintes campos são obrigatórios e devem ser preenchidos:
          </p>
          <ul class="required-fields-list">
            <li *ngFor="let error of requiredFieldsErrors">{{ error }}</li>
          </ul>
        </div>
      </div>
      <div class="br-modal-footer d-flex align-items-center justify-content-center">
        <button type="button" class="br-button primary" (click)="closeRequiredFieldsModal()">
          <i class="fas fa-check mr-1" aria-hidden="true"></i>
          Entendi
        </button>
      </div>
    </div>
  </div>

  <!-- Success Modal -->
  <div class="br-scrim foco" *ngIf="showSuccessModal" data-scrim="true" aria-modal="true" role="dialog"
    data-visible="true" id="successModalScrim">
    <div class="br-modal small" (click)="$event.stopPropagation()">
      <div class="br-modal-header">
        <div class="modal-title">Sucesso!</div>
        <button class="br-button circle small" type="button" aria-label="Fechar modal" data-dismiss="true"
          (click)="closeSuccessModal()">
          <i class="fas fa-times" aria-hidden="true"></i>
        </button>
      </div>
      <div class="br-modal-body">
        <div class="delete-confirmation">
          <div class="delete-icon">
            <i class="fas fa-check-circle text-success" aria-hidden="true"></i>
          </div>
          <p class="delete-message">
            {{ successMessage }}
          </p>
        </div>
      </div>
      <div class="br-modal-footer d-flex justify-content-center">
        <button class="br-button primary" type="button" (click)="closeSuccessModal()">
          OK
        </button>
      </div>
    </div>
  </div>
</div>

<app-procuracao-modal
  [isVisible]="showProcuracaoModal"
  (close)="onProcuracaoClose()"
  (submit)="onProcuracaoSubmit($event)"
  (success)="onProcuracaoSuccess()">
</app-procuracao-modal>

<!-- Procuração Success Modal -->
<div class="br-scrim foco" *ngIf="showProcuracaoSuccessModal" data-scrim="true" aria-modal="true" role="dialog"
  data-visible="true" id="procuracaoSuccessModalScrim">
  <div class="br-modal small" (click)="$event.stopPropagation()">
    <div class="br-modal-header">
      <div class="modal-title">Sucesso!</div>
      <button class="br-button circle small" type="button" aria-label="Fechar modal" data-dismiss="true"
        (click)="closeProcuracaoSuccessModal()">
        <i class="fas fa-times" aria-hidden="true"></i>
      </button>
    </div>
    <div class="br-modal-body">
      <div class="delete-confirmation">
        <div class="delete-icon">
          <i class="fas fa-check-circle text-success" aria-hidden="true"></i>
        </div>
        <p class="delete-message">
          Procuração enviada com sucesso!
        </p>
      </div>
    </div>
    <div class="br-modal-footer d-flex justify-content-center">
      <button class="br-button primary" type="button" (click)="closeProcuracaoSuccessModal()">
        OK
      </button>
    </div>
  </div>
</div>